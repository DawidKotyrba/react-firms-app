(this.webpackJsonpfirmtable=this.webpackJsonpfirmtable||[]).push([[0],{19:function(e,t,a){e.exports=a(44)},24:function(e,t,a){},25:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(13),s=a.n(i),c=(a(24),a(25),a(2)),l=a.n(c),m=a(14),o=a(15),u=a(16),d=a(18),f=a(17),h=a(3),g=a.n(h),v=function(e){var t=e.filtredFirms.slice(e.first,e.last).map((function(e){return r.a.createElement("div",{className:"table-row",key:e.id,onLoad:void(document.getElementById("loader").style.display="none")},r.a.createElement("div",{className:"id-cell"},e.id),r.a.createElement("div",{className:"item-cell"},e.name),r.a.createElement("div",{className:"item-cell"},e.city),r.a.createElement("div",{className:"item-cell"},e.sumIncomesValue),r.a.createElement("div",{className:"item-cell"},e.avgIncomesValue),r.a.createElement("div",{className:"item-cell"},e.lastMonthSumIncomesValue))}));return r.a.createElement("div",{className:"table-container"},r.a.createElement("div",{className:"table-header-row"},r.a.createElement("span",{className:"id-cell-header",id:"id",onClick:e.sort},"Id"),r.a.createElement("span",{className:"item-cell-header",id:"name",onClick:e.sort},"Name"),r.a.createElement("span",{className:"item-cell-header",id:"city",onClick:e.sort},"City"),r.a.createElement("span",{className:"item-cell-header",id:"sumIncomesValue",onClick:e.sort},"Sum incomses value"),r.a.createElement("span",{className:"item-cell-header",id:"avgIncomesValue",onClick:e.sort},"Avg incomses value"),r.a.createElement("span",{className:"item-cell-header",id:"lastMonthSumIncomesValue",onClick:e.sort},"Last month Sum")),t)},p=function(e){for(var t=e.filtredFirms.length/e.firmsPerPage,a=[],n=0;n<t;n++)a.push(n+1);if(a.length<7){var i=a.map((function(t,a){return r.a.createElement("span",{className:"number",key:a,onClick:function(){e.paginate(t)}},t)}));return r.a.createElement("div",{className:"numbers-bar"},i)}var s=a.slice(0,2).map((function(t,a){return r.a.createElement("span",{className:"number",key:a,onClick:function(){e.paginate(t)}},t)})),c=a.slice(e.clickedBarNumber-2,e.clickedBarNumber+2).map((function(t,a){return r.a.createElement("span",{className:"number",key:a,onClick:function(){e.paginate(t)}},t)}));return r.a.createElement("div",{className:"numbers-bar"},s,r.a.createElement("button",{className:"number arrows",onClick:e.moveBarLeft},"\u2190"),c,r.a.createElement("button",{className:"number arrows",onClick:e.moveBarRight},"\u2192"))},N=function(e){return r.a.createElement("form",null,r.a.createElement("h2",null,"Shearch"),r.a.createElement("input",{className:"search-input",type:"text",onChange:e.filtrFirms}))},k=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).sortIncomesData=function(e,t){return e.date<t.date?-1:e.date>t.date?1:0},e.checkWindowWidth=function(){var t=window.innerWidth;t<=433?e.setState({firmsPerPage:1}):t<=575?e.setState({firmsPerPage:2}):t<=855?e.setState({firmsPerPage:3}):e.setState({firmsPerPage:10}),e.paginate(1)},e.getIncomes=function(){var e=Object(m.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,Promise.all(t.map((function(e){return g.a.get("https://recruitment.hal.skygate.io/incomes/"+e.id).then((function(e){a.push(e.data)}))})));case 3:return e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.round=function(e,t){var a=Math.pow(10,t+1);return(e=Math.round(Math.round(e*a)/10))/(a/10)},e.totalIncomesValue=function(t){for(var a=0,n=0;n<t.length;n++)a+=parseFloat(t[n].value);return e.setState({valueSum:a}),e.round(a,2)},e.avgIncomesValue=function(t){var a;return a=e.state.valueSum/t.length,e.round(a,2)},e.lastMonthValue=function(t){t.sort(e.sortIncomesData);var a=t[t.length-1].date.substring(7,0),n=t.filter((function(e){return e.date.substr(0,7).substring(7,0)===a})).reduce((function(e,t){return e+parseFloat(t.value)}),0);return e.round(n,2)},e.preloading=function(){var e=document.createElement("div");e.id="loader",e.innerHTML="LOADING",document.body.appendChild(e)},e.dynamicSort=function(e){var t=1;return"-"===e[0]&&(t=-1,e=e.substr(1)),function(a,n){return(a[e]<n[e]?-1:a[e]>n[e]?1:0)*t}},e.sortFunctionBy=function(t){e.state.isToggleOn?(e.setState({filtredFirmsNames:e.state.filtredFirmsNames.sort(e.dynamicSort(t.target.id))}),e.handleClickId()):(e.setState({filtredFirmsNames:e.state.filtredFirmsNames.sort(e.dynamicSort("-"+t.target.id))}),e.handleClickId())},e.paginate=function(t){e.setState({currentPage:t,indexOfLastFirm:t*e.state.firmsPerPage,indexOfFirstFirm:t*e.state.firmsPerPage-e.state.firmsPerPage})},e.moveBarLeft=function(){4===e.state.clickedBarNumber||e.setState({clickedBarNumber:e.state.clickedBarNumber-1})},e.moveBarRight=function(){e.state.clickedBarNumber===Math.round(e.state.filtredFirmsNames.length/e.state.firmsPerPage-1)||e.setState({clickedBarNumber:e.state.clickedBarNumber+1})},e.filtrFirms=function(t){e.setState({});var a=e.state.firmsNames.filter((function(e){return e.city.toUpperCase().includes(t.target.value.toUpperCase())||e.name.toUpperCase().includes(t.target.value.toUpperCase())}));e.setState({filtredFirmsNames:a,clickedBarNumber:4})},e.state={firmsNames:[],filtredFirmsNames:[],currentFirms:[],currentPage:1,firmsPerPage:10,isToggleOn:!0},e}return Object(u.a)(a,[{key:"handleClickId",value:function(){this.setState((function(e){return{isToggleOn:!e.isToggleOn}}))}},{key:"componentDidMount",value:function(){var e=this;this.preloading(),g.a.get("https://recruitment.hal.skygate.io/companies").then((function(t){var a=t.data,n=[];e.getIncomes(a).then((function(t){for(var r=0;r<a.length;r++)a[r].incomes=t[r].incomes,a[r].sumIncomesValue=e.totalIncomesValue(t[r].incomes),a[r].avgIncomesValue=e.avgIncomesValue(t[r].incomes),a[r].lastMonthSumIncomesValue=e.lastMonthValue(t[r].incomes),n.push(a[r]);e.setState({firmsNames:n}),e.setState({filtredFirmsNames:n}),e.setState({clickedBarNumber:4})})),e.paginate(1)})),this.checkWindowWidth(),window.addEventListener("resize",this.checkWindowWidth)}},{key:"render",value:function(){return r.a.createElement("div",{className:"page-container"},r.a.createElement(N,{filtrFirms:this.filtrFirms}),r.a.createElement(v,{first:this.state.indexOfFirstFirm,last:this.state.indexOfLastFirm,sort:this.sortFunctionBy,filtredFirms:this.state.filtredFirmsNames}),r.a.createElement(p,{filtredFirms:this.state.filtredFirmsNames,firmsPerPage:this.state.firmsPerPage,paginate:this.paginate,moveBarLeft:this.moveBarLeft,moveBarRight:this.moveBarRight,clickedBarNumber:this.state.clickedBarNumber}))}}]),a}(n.Component);var b=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.93d47616.chunk.js.map